<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SongLyricAI - Improve Your Lyrics with AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        .sidebar-option:hover {
            transform: translateX(5px);
            transition: transform 0.2s ease;
        }
        .lyrics-editor {
            min-height: 400px;
            border-left: 1px solid #e5e7eb;
        }
        .dark .lyrics-editor {
            border-left-color: #4b5563;
        }
        .version-comparison {
            grid-template-columns: 1fr 1fr;
        }
        @media (max-width: 768px) {
            .version-comparison {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        // Main App Component
        const App = () => {
            const [currentPage, setCurrentPage] = React.useState('home');
            const [isAuthenticated, setIsAuthenticated] = React.useState(false);
            const [darkMode, setDarkMode] = React.useState(false);
            const [user, setUser] = React.useState(null);

            React.useEffect(() => {
                // Check for saved dark mode preference
                const savedMode = localStorage.getItem('darkMode') === 'true';
                setDarkMode(savedMode);
                
                // Check if user is already authenticated
                const token = localStorage.getItem('token');
                if (token) {
                    verifyToken(token);
                }
            }, []);

            React.useEffect(() => {
                // Apply dark mode class to body
                if (darkMode) {
                    document.body.classList.add('dark');
                } else {
                    document.body.classList.remove('dark');
                }
                localStorage.setItem('darkMode', darkMode);
            }, [darkMode]);

            const verifyToken = async (token) => {
                try {
                    const response = await axios.post('/api/auth/verify', { token });
                    if (response.data.valid) {
                        setIsAuthenticated(true);
                        setUser(response.data.user);
                    }
                } catch (error) {
                    console.error('Token verification failed:', error);
                    localStorage.removeItem('token');
                }
            };

            const handleLogin = (userData) => {
                setIsAuthenticated(true);
                setUser(userData);
                localStorage.setItem('token', userData.token);
            };

            const handleLogout = () => {
                setIsAuthenticated(false);
                setUser(null);
                localStorage.removeItem('token');
                setCurrentPage('home');
            };

            const toggleDarkMode = () => {
                setDarkMode(!darkMode);
            };

            return (
                <div className="min-h-screen flex flex-col">
                    <Header 
                        isAuthenticated={isAuthenticated} 
                        onLogout={handleLogout} 
                        user={user}
                        darkMode={darkMode}
                        toggleDarkMode={toggleDarkMode}
                        navigate={setCurrentPage}
                    />
                    
                    <main className="flex-grow container mx-auto px-4 py-8">
                        {currentPage === 'home' && (
                            <HomePage 
                                isAuthenticated={isAuthenticated} 
                                navigate={setCurrentPage} 
                            />
                        )}
                        {currentPage === 'login' && (
                            <AuthPage 
                                type="login" 
                                onSuccess={handleLogin} 
                                navigate={setCurrentPage} 
                            />
                        )}
                        {currentPage === 'register' && (
                            <AuthPage 
                                type="register" 
                                onSuccess={handleLogin} 
                                navigate={setCurrentPage} 
                            />
                        )}
                        {currentPage === 'editor' && (
                            <EditorPage 
                                user={user} 
                                navigate={setCurrentPage} 
                                darkMode={darkMode}
                            />
                        )}
                        {currentPage === 'saved' && (
                            <SavedLyricsPage 
                                user={user} 
                                navigate={setCurrentPage} 
                            />
                        )}
                    </main>
                    
                    <Footer />
                </div>
            );
        };

        // Header Component
        const Header = ({ isAuthenticated, onLogout, user, darkMode, toggleDarkMode, navigate }) => {
            return (
                <header className="bg-white dark:bg-gray-800 shadow-sm">
                    <div className="container mx-auto px-4 py-4 flex justify-between items-center">
                        <div 
                            className="flex items-center cursor-pointer" 
                            onClick={() => navigate('home')}
                        >
                            <div className="bg-indigo-600 text-white rounded-full w-10 h-10 flex items-center justify-center mr-3">
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" />
                                </svg>
                            </div>
                            <h1 className="text-xl font-bold text-indigo-600 dark:text-indigo-400">SongLyricAI</h1>
                        </div>
                        
                        <nav className="flex items-center space-x-6">
                            {isAuthenticated ? (
                                <>
                                    <button 
                                        onClick={() => navigate('editor')}
                                        className="text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400"
                                    >
                                        Editor
                                    </button>
                                    <button 
                                        onClick={() => navigate('saved')}
                                        className="text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400"
                                    >
                                        My Lyrics
                                    </button>
                                    <div className="flex items-center space-x-2">
                                        <span className="text-gray-700 dark:text-gray-300">Hi, {user?.name}</span>
                                        <button 
                                            onClick={onLogout}
                                            className="bg-gray-200 dark:bg-gray-700 px-3 py-1 rounded-md text-sm hover:bg-gray-300 dark:hover:bg-gray-600"
                                        >
                                            Logout
                                        </button>
                                    </div>
                                </>
                            ) : (
                                <>
                                    <button 
                                        onClick={() => navigate('login')}
                                        className="text-gray-700 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400"
                                    >
                                        Login
                                    </button>
                                    <button 
                                        onClick={() => navigate('register')}
                                        className="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700"
                                    >
                                        Sign Up
                                    </button>
                                </>
                            )}
                            <button 
                                onClick={toggleDarkMode}
                                className="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700"
                            >
                                {darkMode ? (
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                        <path fillRule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clipRule="evenodd" />
                                    </svg>
                                ) : (
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
                                    </svg>
                                )}
                            </button>
                        </nav>
                    </div>
                </header>
            );
        };

        // Home Page Component
        const HomePage = ({ isAuthenticated, navigate }) => {
            return (
                <div className="flex flex-col items-center justify-center py-12">
                    <div className="max-w-3xl text-center mb-12">
                        <h1 className="text-4xl md:text-5xl font-bold mb-6 text-indigo-600 dark:text-indigo-400">
                            Improve Your Song Lyrics with AI
                        </h1>
                        <p className="text-xl text-gray-600 dark:text-gray-300 mb-8">
                            Get expert-level suggestions to refine your lyrics, find better rhymes, 
                            and make your songs more emotional and impactful.
                        </p>
                        <button 
                            onClick={() => navigate(isAuthenticated ? 'editor' : 'login')}
                            className="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full text-lg transition-all duration-300 transform hover:scale-105"
                        >
                            Start Writing
                        </button>
                    </div>
                    
                    <div className="grid md:grid-cols-3 gap-8 mb-12">
                        <FeatureCard 
                            icon={
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                                </svg>
                            }
                            title="Enhance Your Style"
                            description="Get suggestions to improve your lyrical style and make your words flow better."
                        />
                        <FeatureCard 
                            icon={
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            }
                            title="Find Perfect Rhymes"
                            description="Discover rhymes that fit perfectly with your lyrics while maintaining meaning."
                        />
                        <FeatureCard 
                            icon={
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z" />
                                </svg>
                            }
                            title="Emotional Impact"
                            description="Make your lyrics more emotionally powerful with AI-powered suggestions."
                        />
                    </div>
                    
                    <div className="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-4xl w-full">
                        <h2 className="text-2xl font-bold mb-4 text-center">How It Works</h2>
                        <div className="grid md:grid-cols-3 gap-6">
                            <StepCard 
                                number="1"
                                title="Write Your Lyrics"
                                description="Paste or type your song lyrics into our editor."
                            />
                            <StepCard 
                                number="2"
                                title="Get AI Suggestions"
                                description="Choose from various improvement options like rhymes, metaphors, or emotional impact."
                            />
                            <StepCard 
                                number="3"
                                title="Refine & Save"
                                description="Compare versions and save your improved lyrics."
                            />
                        </div>
                    </div>
                </div>
            );
        };

        const FeatureCard = ({ icon, title, description }) => {
            return (
                <div className="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300">
                    <div className="text-indigo-600 dark:text-indigo-400 mb-4">
                        {icon}
                    </div>
                    <h3 className="text-xl font-bold mb-2">{title}</h3>
                    <p className="text-gray-600 dark:text-gray-300">{description}</p>
                </div>
            );
        };

        const StepCard = ({ number, title, description }) => {
            return (
                <div className="flex items-start">
                    <div className="bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-300 rounded-full w-8 h-8 flex items-center justify-center mr-4 mt-1 font-bold">
                        {number}
                    </div>
                    <div>
                        <h3 className="text-lg font-bold mb-1">{title}</h3>
                        <p className="text-gray-600 dark:text-gray-300">{description}</p>
                    </div>
                </div>
            );
        };

        // Auth Page Component
        const AuthPage = ({ type, onSuccess, navigate }) => {
            const [formData, setFormData] = React.useState({
                email: '',
                password: '',
                name: type === 'register' ? '' : undefined
            });
            const [error, setError] = React.useState('');
            const [loading, setLoading] = React.useState(false);

            const handleChange = (e) => {
                setFormData({
                    ...formData,
                    [e.target.name]: e.target.value
                });
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                setLoading(true);
                setError('');
                
                try {
                    const endpoint = type === 'login' ? '/api/auth/login' : '/api/auth/register';
                    const response = await axios.post(endpoint, formData);
                    
                    onSuccess(response.data);
                    navigate('editor');
                } catch (err) {
                    setError(err.response?.data?.message || 'An error occurred. Please try again.');
                } finally {
                    setLoading(false);
                }
            };

            return (
                <div className="max-w-md mx-auto bg-white dark:bg-gray-800 rounded-lg shadow-md p-8">
                    <h2 className="text-2xl font-bold mb-6 text-center">
                        {type === 'login' ? 'Login to Your Account' : 'Create an Account'}
                    </h2>
                    
                    {error && (
                        <div className="bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-100 p-3 rounded-md mb-4">
                            {error}
                        </div>
                    )}
                    
                    <form onSubmit={handleSubmit}>
                        {type === 'register' && (
                            <div className="mb-4">
                                <label htmlFor="name" className="block text-gray-700 dark:text-gray-300 mb-2">
                                    Name
                                </label>
                                <input
                                    type="text"
                                    id="name"
                                    name="name"
                                    value={formData.name}
                                    onChange={handleChange}
                                    className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700"
                                    required
                                />
                            </div>
                        )}
                        
                        <div className="mb-4">
                            <label htmlFor="email" className="block text-gray-700 dark:text-gray-300 mb-2">
                                Email
                            </label>
                            <input
                                type="email"
                                id="email"
                                name="email"
                                value={formData.email}
                                onChange={handleChange}
                                className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700"
                                required
                            />
                        </div>
                        
                        <div className="mb-6">
                            <label htmlFor="password" className="block text-gray-700 dark:text-gray-300 mb-2">
                                Password
                            </label>
                            <input
                                type="password"
                                id="password"
                                name="password"
                                value={formData.password}
                                onChange={handleChange}
                                className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700"
                                required
                                minLength="6"
                            />
                        </div>
                        
                        <button
                            type="submit"
                            className="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-300"
                            disabled={loading}
                        >
                            {loading ? (
                                <span className="flex items-center justify-center">
                                    <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                        <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                        <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                    </svg>
                                    Processing...
                                </span>
                            ) : (
                                type === 'login' ? 'Login' : 'Register'
                            )}
                        </button>
                    </form>
                    
                    <div className="mt-4 text-center">
                        <p className="text-gray-600 dark:text-gray-300">
                            {type === 'login' ? (
                                <>
                                    Don't have an account?{' '}
                                    <button 
                                        onClick={() => navigate('register')}
                                        className="text-indigo-600 dark:text-indigo-400 hover:underline"
                                    >
                                        Sign up
                                    </button>
                                </>
                            ) : (
                                <>
                                    Already have an account?{' '}
                                    <button 
                                        onClick={() => navigate('login')}
                                        className="text-indigo-600 dark:text-indigo-400 hover:underline"
                                    >
                                        Login
                                    </button>
                                </>
                            )}
                        </p>
                    </div>
                </div>
            );
        };

        // Editor Page Component
        const EditorPage = ({ user, navigate, darkMode }) => {
            const [lyrics, setLyrics] = React.useState('');
            const [improvedLyrics, setImprovedLyrics] = React.useState('');
            const [isLoading, setIsLoading] = React.useState(false);
            const [error, setError] = React.useState('');
            const [success, setSuccess] = React.useState('');
            const [title, setTitle] = React.useState('');
            const [showComparison, setShowComparison] = React.useState(false);
            const [savedVersions, setSavedVersions] = React.useState([]);
            const [selectedVersion, setSelectedVersion] = React.useState(null);
            const [showSavedModal, setShowSavedModal] = React.useState(false);
            const [showInspiration, setShowInspiration] = React.useState(false);
            const [inspirationLines, setInspirationLines] = React.useState([]);

            React.useEffect(() => {
                if (selectedVersion) {
                    setLyrics(selectedVersion.content);
                    setTitle(selectedVersion.title);
                }
            }, [selectedVersion]);

            const handleImprove = async (improvementType) => {
                if (!lyrics.trim()) {
                    setError('Please enter some lyrics first');
                    return;
                }

                setIsLoading(true);
                setError('');
                setImprovedLyrics('');
                setShowComparison(false);

                try {
                    const response = await axios.post('/api/lyrics/improve', {
                        lyrics,
                        improvementType,
                        userId: user?.id
                    });

                    setImprovedLyrics(response.data.improvedLyrics);
                    setShowComparison(true);
                } catch (err) {
                    setError(err.response?.data?.message || 'Failed to improve lyrics. Please try again.');
                } finally {
                    setIsLoading(false);
                }
            };

            const handleSave = async () => {
                if (!lyrics.trim()) {
                    setError('Please enter some lyrics first');
                    return;
                }

                if (!title.trim()) {
                    setError('Please give your lyrics a title');
                    return;
                }

                setIsLoading(true);
                setError('');

                try {
                    const response = await axios.post('/api/lyrics/save', {
                        title,
                        content: lyrics,
                        userId: user?.id
                    });

                    setSuccess('Lyrics saved successfully!');
                    setTimeout(() => setSuccess(''), 3000);
                    fetchSavedVersions();
                } catch (err) {
                    setError(err.response?.data?.message || 'Failed to save lyrics. Please try again.');
                } finally {
                    setIsLoading(false);
                }
            };

            const fetchSavedVersions = async () => {
                try {
                    const response = await axios.get(`/api/lyrics/user/${user?.id}`);
                    setSavedVersions(response.data);
                } catch (err) {
                    console.error('Failed to fetch saved versions:', err);
                }
            };

            const handleGetInspiration = async () => {
                setIsLoading(true);
                setError('');
                setInspirationLines([]);
                setShowInspiration(true);

                try {
                    const response = await axios.post('/api/lyrics/inspiration', {
                        userId: user?.id
                    });

                    setInspirationLines(response.data.lines);
                } catch (err) {
                    setError(err.response?.data?.message || 'Failed to get inspiration. Please try again.');
                } finally {
                    setIsLoading(false);
                }
            };

            const handleUseInspiration = (line) => {
                setLyrics(prev => prev ? `${prev}\n${line}` : line);
                setShowInspiration(false);
            };

            const exportToPDF = () => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                doc.setFontSize(16);
                doc.text(title, 10, 10);
                
                doc.setFontSize(12);
                const lines = lyrics.split('\n');
                let y = 20;
                
                lines.forEach(line => {
                    if (y > 280) {
                        doc.addPage();
                        y = 10;
                    }
                    doc.text(line, 10, y);
                    y += 7;
                });
                
                doc.save(`${title || 'lyrics'}.pdf`);
            };

            const exportToTXT = () => {
                const blob = new Blob([lyrics], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${title || 'lyrics'}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            };

            return (
                <div className="flex flex-col lg:flex-row gap-6">
                    {/* Sidebar */}
                    <div className="w-full lg:w-64 bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md h-fit">
                        <h2 className="text-xl font-bold mb-4">Improvement Tools</h2>
                        
                        <div className="space-y-2 mb-6">
                            <button
                                onClick={() => handleImprove('improve_style')}
                                disabled={isLoading}
                                className="w-full sidebar-option flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                                </svg>
                                Improve Style
                            </button>
                            <button
                                onClick={() => handleImprove('find_rhymes')}
                                disabled={isLoading}
                                className="w-full sidebar-option flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                                </svg>
                                Find Rhymes
                            </button>
                            <button
                                onClick={() => handleImprove('suggest_metaphors')}
                                disabled={isLoading}
                                className="w-full sidebar-option flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
                                </svg>
                                Suggest Metaphors
                            </button>
                            <button
                                onClick={() => handleImprove('make_emotional')}
                                disabled={isLoading}
                                className="w-full sidebar-option flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                                </svg>
                                Make Emotional
                            </button>
                            <button
                                onClick={() => handleImprove('simplify')}
                                disabled={isLoading}
                                className="w-full sidebar-option flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                                </svg>
                                Simplify
                            </button>
                        </div>
                        
                        <div className="mb-6">
                            <button
                                onClick={handleGetInspiration}
                                disabled={isLoading}
                                className="w-full flex items-center justify-center px-4 py-2 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200 rounded-md hover:bg-indigo-200 dark:hover:bg-indigo-800 transition-colors duration-200"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" />
                                </svg>
                                Get Inspiration
                            </button>
                        </div>
                        
                        <div className="mb-6">
                            <button
                                onClick={() => setShowSavedModal(true)}
                                className="w-full flex items-center justify-center px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4" />
                                </svg>
                                Load Saved
                            </button>
                        </div>
                        
                        <div className="space-y-2">
                            <button
                                onClick={handleSave}
                                disabled={isLoading || !lyrics.trim()}
                                className="w-full flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-300 dark:disabled:bg-gray-600 transition-colors duration-200"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />
                                </svg>
                                Save Lyrics
                            </button>
                            
                            <div className="grid grid-cols-2 gap-2">
                                <button
                                    onClick={exportToPDF}
                                    disabled={!lyrics.trim()}
                                    className="flex items-center justify-center px-3 py-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 rounded-md hover:bg-red-200 dark:hover:bg-red-800 disabled:opacity-50 transition-colors duration-200 text-sm"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                                    </svg>
                                    PDF
                                </button>
                                <button
                                    onClick={exportToTXT}
                                    disabled={!lyrics.trim()}
                                    className="flex items-center justify-center px-3 py-2 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-200 rounded-md hover:bg-blue-200 dark:hover:bg-blue-800 disabled:opacity-50 transition-colors duration-200 text-sm"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                    </svg>
                                    TXT
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    {/* Main Editor */}
                    <div className="flex-grow">
                        <div className="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                            {error && (
                                <div className="bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-100 p-3 rounded-md mb-4">
                                    {error}
                                </div>
                            )}
                            
                            {success && (
                                <div className="bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-100 p-3 rounded-md mb-4">
                                    {success}
                                </div>
                            )}
                            
                            <div className="mb-4">
                                <input
                                    type="text"
                                    placeholder="Give your lyrics a title..."
                                    value={title}
                                    onChange={(e) => setTitle(e.target.value)}
                                    className="w-full px-4 py-2 text-xl font-bold border-b border-gray-300 dark:border-gray-600 focus:outline-none focus:border-indigo-500 dark:bg-gray-800"
                                />
                            </div>
                            
                            {!showComparison ? (
                                <textarea
                                    value={lyrics}
                                    onChange={(e) => setLyrics(e.target.value)}
                                    placeholder="Write or paste your lyrics here..."
                                    className="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 min-h-96"
                                />
                            ) : (
                                <div className="version-comparison grid gap-4">
                                    <div>
                                        <h3 className="font-bold mb-2">Original Version</h3>
                                        <div className="bg-gray-100 dark:bg-gray-700 p-4 rounded-md whitespace-pre-line">
                                            {lyrics}
                                        </div>
                                    </div>
                                    <div>
                                        <h3 className="font-bold mb-2">Improved Version</h3>
                                        <div className="bg-indigo-50 dark:bg-indigo-900 p-4 rounded-md whitespace-pre-line">
                                            {improvedLyrics}
                                        </div>
                                        <div className="mt-2 flex justify-end">
                                            <button
                                                onClick={() => {
                                                    setLyrics(improvedLyrics);
                                                    setShowComparison(false);
                                                }}
                                                className="px-3 py-1 bg-indigo-600 text-white rounded-md text-sm hover:bg-indigo-700"
                                            >
                                                Use This Version
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            )}
                            
                            {isLoading && (
                                <div className="mt-4 flex justify-center">
                                    <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
                                </div>
                            )}
                        </div>
                    </div>
                    
                    {/* Saved Versions Modal */}
                    {showSavedModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                            <div className="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto">
                                <div className="p-6">
                                    <div className="flex justify-between items-center mb-4">
                                        <h2 className="text-xl font-bold">Your Saved Lyrics</h2>
                                        <button
                                            onClick={() => setShowSavedModal(false)}
                                            className="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"
                                        >
                                            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                                            </svg>
                                        </button>
                                    </div>
                                    
                                    {savedVersions.length === 0 ? (
                                        <div className="text-center py-8">
                                            <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 mx-auto text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                            </svg>
                                            <p className="mt-2 text-gray-600 dark:text-gray-300">No saved lyrics yet</p>
                                        </div>
                                    ) : (
                                        <div className="space-y-2">
                                            {savedVersions.map(version => (
                                                <div 
                                                    key={version.id} 
                                                    className={`p-3 border rounded-md cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 ${selectedVersion?.id === version.id ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-900' : 'border-gray-200 dark:border-gray-600'}`}
                                                    onClick={() => {
                                                        setSelectedVersion(version);
                                                        setShowSavedModal(false);
                                                    }}
                                                >
                                                    <h3 className="font-medium">{version.title}</h3>
                                                    <p className="text-sm text-gray-500 dark:text-gray-400 truncate">
                                                        {version.content.substring(0, 60)}{version.content.length > 60 ? '...' : ''}
                                                    </p>
                                                    <p className="text-xs text-gray-400 dark:text-gray-500 mt-1">
                                                        {new Date(version.createdAt).toLocaleString()}
                                                    </p>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}
                    
                    {/* Inspiration Modal */}
                    {showInspiration && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                            <div className="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto">
                                <div className="p-6">
                                    <div className="flex justify-between items-center mb-4">
                                        <h2 className="text-xl font-bold">Inspiration Lines</h2>
                                        <button
                                            onClick={() => setShowInspiration(false)}
                                            className="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"
                                        >
                                            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                                            </svg>
                                        </button>
                                    </div>
                                    
                                    {isLoading ? (
                                        <div className="flex justify-center py-8">
                                            <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div>
                                        </div>
                                    ) : inspirationLines.length === 0 ? (
                                        <div className="text-center py-8">
                                            <p className="text-gray-600 dark:text-gray-300">No inspiration lines generated</p>
                                        </div>
                                    ) : (
                                        <div className="space-y-4">
                                            {inspirationLines.map((line, index) => (
                                                <div 
                                                    key={index} 
                                                    className="p-4 border border-gray-200 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer"
                                                    onClick={() => handleUseInspiration(line)}
                                                >
                                                    <p className="italic">"{line}"</p>
                                                    <div className="mt-2 flex justify-end">
                                                        <button
                                                            onClick={(e) => {
                                                                e.stopPropagation();
                                                                handleUseInspiration(line);
                                                            }}
                                                            className="px-3 py-1 bg-indigo-600 text-white rounded-md text-sm hover:bg-indigo-700"
                                                        >
                                                            Use This Line
                                                        </button>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // Saved Lyrics Page Component
        const SavedLyricsPage = ({ user, navigate }) => {
            const [savedLyrics, setSavedLyrics] = React.useState([]);
            const [loading, setLoading] = React.useState(true);
            const [error, setError] = React.useState('');

            React.useEffect(() => {
                const fetchSavedLyrics = async () => {
                    try {
                        const response = await axios.get(`/api/lyrics/user/${user.id}`);
                        setSavedLyrics(response.data);
                    } catch (err) {
                        setError(err.response?.data?.message || 'Failed to load saved lyrics');
                    } finally {
                        setLoading(false);
                    }
                };

                fetchSavedLyrics();
            }, [user.id]);

            const handleDelete = async (id) => {
                try {
                    await axios.delete(`/api/lyrics/${id}`);
                    setSavedLyrics(savedLyrics.filter(lyric => lyric.id !== id));
                } catch (err) {
                    setError(err.response?.data?.message || 'Failed to delete lyrics');
                }
            };

            const handleEdit = (lyric) => {
                navigate('editor', { state: { lyric } });
            };

            return (
                <div className="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                    <div className="flex justify-between items-center mb-6">
                        <h1 className="text-2xl font-bold">Your Saved Lyrics</h1>
                        <button
                            onClick={() => navigate('editor')}
                            className="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md"
                        >
                            New Lyrics
                        </button>
                    </div>
                    
                    {error && (
                        <div className="bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-100 p-3 rounded-md mb-4">
                            {error}
                        </div>
                    )}
                    
                    {loading ? (
                        <div className="flex justify-center py-12">
                            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
                        </div>
                    ) : savedLyrics.length === 0 ? (
                        <div className="text-center py-12">
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-16 w-16 mx-auto text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                            <h2 className="text-xl font-medium mt-4 text-gray-600 dark:text-gray-300">No saved lyrics yet</h2>
                            <p className="text-gray-500 dark:text-gray-400 mt-2">Start by creating a new lyrics</p>
                        </div>
                    ) : (
                        <div className="space-y-4">
                            {savedLyrics.map(lyric => (
                                <div key={lyric.id} className="border border-gray-200 dark:border-gray-600 rounded-md p-4 hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <div className="flex justify-between items-start">
                                        <div>
                                            <h3 className="font-bold text-lg">{lyric.title}</h3>
                                            <p className="text-gray-600 dark:text-gray-300 text-sm mt-1">
                                                Last updated: {new Date(lyric.updatedAt).toLocaleString()}
                                            </p>
                                        </div>
                                        <div className="flex space-x-2">
                                            <button
                                                onClick={() => {
                                                    navigate('editor');
                                                    // In a real app, we would pass the lyric to the editor
                                                    // This is simplified for the demo
                                                }}
                                                className="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded-md text-sm hover:bg-gray-300 dark:hover:bg-gray-600"
                                            >
                                                Edit
                                            </button>
                                            <button
                                                onClick={() => handleDelete(lyric.id)}
                                                className="px-3 py-1 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 rounded-md text-sm hover:bg-red-200 dark:hover:bg-red-800"
                                            >
                                                Delete
                                            </button>
                                        </div>
                                    </div>
                                    <div className="mt-3 bg-gray-100 dark:bg-gray-700 p-3 rounded-md whitespace-pre-line max-h-32 overflow-y-auto">
                                        {lyric.content.substring(0, 300)}{lyric.content.length > 300 ? '...' : ''}
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        // Footer Component
        const Footer = () => {
            return (
                <footer className="bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 mt-8">
                    <div className="container mx-auto px-4 py-6">
                        <div className="flex flex-col md:flex-row justify-between items-center">
                            <div className="mb-4 md:mb-0">
                                <p className="text-gray-600 dark:text-gray-300">
                                    &copy; {new Date().getFullYear()} SongLyricAI. All rights reserved.
                                </p>
                            </div>
                            <div className="flex space-x-6">
                                <a href="#" className="text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400">
                                    Terms
                                </a>
                                <a href="#" className="text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400">
                                    Privacy
                                </a>
                                <a href="#" className="text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400">
                                    Contact
                                </a>
                            </div>
                        </div>
                    </div>
                </footer>
            );
        };

        // Mock Backend API
        const mockBackend = {
            auth: {
                login: async ({ email, password }) => {
                    // In a real app, this would check against a database
                    if (email === 'user@example.com' && password === 'password') {
                        return {
                            token: 'mock-token-123',
                            user: {
                                id: 'user-123',
                                name: 'Demo User',
                                email: 'user@example.com'
                            }
                        };
                    }
                    throw new Error('Invalid email or password');
                },
                register: async ({ name, email, password }) => {
                    // In a real app, this would create a new user in the database
                    return {
                        token: 'mock-token-456',
                        user: {
                            id: 'user-' + Math.random().toString(36).substr(2, 9),
                            name,
                            email
                        }
                    };
                },
                verify: async ({ token }) => {
                    // In a real app, this would verify the JWT token
                    if (token && token.startsWith('mock-token')) {
                        return {
                            valid: true,
                            user: {
                                id: 'user-123',
                                name: 'Demo User',
                                email: 'user@example.com'
                            }
                        };
                    }
                    return { valid: false };
                }
            },
            lyrics: {
                improve: async ({ lyrics, improvementType, userId }) => {
                    // In a real app, this would call the OpenAI API
                    // This is a mock implementation with simple transformations
                    const improvements = {
                        improve_style: `Here's an improved version of your lyrics:\n\n${lyrics}\n\nWith better flow and style.`,
                        find_rhymes: `Rhyming version:\n\n${lyrics.split('\n').map(line => line + ' (rhyme)').join('\n')}`,
                        suggest_metaphors: `Metaphorical version:\n\n${lyrics}\n\nNow with more vivid imagery.`,
                        make_emotional: `Emotional version:\n\n${lyrics}\n\nNow with more feeling and depth.`,
                        simplify: `Simplified version:\n\n${lyrics}\n\nNow more straightforward and clear.`
                    };
                    
                    return {
                        improvedLyrics: improvements[improvementType] || lyrics
                    };
                },
                save: async ({ title, content, userId }) => {
                    // In a real app, this would save to a database
                    return {
                        id: 'lyric-' + Math.random().toString(36).substr(2, 9),
                        title,
                        content,
                        userId,
                        createdAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString()
                    };
                },
                getByUser: async (userId) => {
                    // In a real app, this would query the database
                    if (userId === 'user-123') {
                        return [
                            {
                                id: 'lyric-1',
                                title: 'My First Song',
                                content: 'This is the first verse of my song\nAnd this is the second line\nSinging about love and pain',
                                userId: 'user-123',
                                createdAt: '2023-01-01T12:00:00Z',
                                updatedAt: '2023-01-01T12:00:00Z'
                            },
                            {
                                id: 'lyric-2',
                                title: 'Summer Nights',
                                content: 'Summer nights are long and warm\nFireflies dance in the twilight\nWhispers carried on the breeze',
                                userId: 'user-123',
                                createdAt: '2023-02-15T08:30:00Z',
                                updatedAt: '2023-02-20T09:45:00Z'
                            }
                        ];
                    }
                    return [];
                },
                delete: async (id) => {
                    // In a real app, this would delete from the database
                    return { success: true };
                },
                inspiration: async () => {
                    // In a real app, this would call the OpenAI API
                    return {
                        lines: [
                            "The stars whisper secrets to the moon",
                            "Your love is a river that never runs dry",
                            "Time slips through my fingers like sand",
                            "The city lights blink like distant fireflies"
                        ]
                    };
                }
            }
        };

        // Mock axios implementation for the demo
        axios.post = async (url, data) => {
            // Simulate network delay
            await new Promise(resolve => setTimeout(resolve, 500));
            
            if (url.startsWith('/api/auth/login')) {
                return { data: await mockBackend.auth.login(data) };
            } else if (url.startsWith('/api/auth/register')) {
                return { data: await mockBackend.auth.register(data) };
            } else if (url.startsWith('/api/auth/verify')) {
                return { data: await mockBackend.auth.verify(data) };
            } else if (url.startsWith('/api/lyrics/improve')) {
                return { data: await mockBackend.lyrics.improve(data) };
            } else if (url.startsWith('/api/lyrics/save')) {
                return { data: await mockBackend.lyrics.save(data) };
            } else if (url.startsWith('/api/lyrics/inspiration')) {
                return { data: await mockBackend.lyrics.inspiration() };
            }
            
            throw new Error('Endpoint not found');
        };
        
        axios.get = async (url) => {
            // Simulate network delay
            await new Promise(resolve => setTimeout(resolve, 500));
            
            if (url.startsWith('/api/lyrics/user/')) {
                const userId = url.split('/').pop();
                return { data: await mockBackend.lyrics.getByUser(userId) };
            }
            
            throw new Error('Endpoint not found');
        };
        
        axios.delete = async (url) => {
            // Simulate network delay
            await new Promise(resolve => setTimeout(resolve, 500));
            
            if (url.startsWith('/api/lyrics/')) {
                const id = url.split('/').pop();
                return { data: await mockBackend.lyrics.delete(id) };
            }
            
            throw new Error('Endpoint not found');
        };

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
<p style="border-radius: 8px; text-align: center; font-size: 12px; color: #fff; margin-top: 16px;position: fixed; left: 8px; bottom: 8px; z-index: 10; background: rgba(0, 0, 0, 0.8); padding: 4px 8px;">Made with <img src="https://enzostvs-deepsite.hf.space/logo.svg" alt="DeepSite Logo" style="width: 16px; height: 16px; vertical-align: middle;display:inline-block;margin-right:3px;filter:brightness(0) invert(1);"><a href="https://enzostvs-deepsite.hf.space" style="color: #fff;text-decoration: underline;" target="_blank" >DeepSite</a> - 🧬 <a href="https://enzostvs-deepsite.hf.space?remix=Esteban23523525/lyricsai" style="color: #fff;text-decoration: underline;" target="_blank" >Remix</a></p></body>
</html>